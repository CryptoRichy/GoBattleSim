<script src="https://code.jquery.com/jquery-2.2.4.js"  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://code.jquery.com/ui/jquery-ui-git.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/ju/dt-1.10.16/r-2.2.1/sc-1.4.4/datatables.min.js"></script>
<link href="https://code.jquery.com/ui/jquery-ui-git.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/scroller/1.4.4/css/scroller.dataTables.min.css" rel="stylesheet">
<link href="http://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">


<script type="text/javascript" src="GoBattleSimLib.js"></script>
<script type="text/javascript" src="UI.js"></script>
<script type="text/javascript" src="Populate_local.js"></script>

<style>
	table {
		width: 100%;
		margin-bottom: 0px;
	}
	div#ui-attackerinputbody h4 {
		background: white;
		padding: 8px;
		margin: 10px 0px 0px 0px;
		border: 1px solid #eceef3;
		border-radius: 2px;
	}
	th, td {
		vertical-align: middle;
		text-align: center;
		line-height: normal;
	}
	div#DefenderInput td,	
	div#AttackerInput td {
	    border: none;
	    padding: 5px 0px;
	}
	input, select {
		width: 100%;
        margin-bottom:0px !important;
	}
	
	.input-with-icon{
		background-color: white !important;
		padding-left: 40px !important;
		background-repeat: no-repeat;
		text-align: start;
	}
	.species-input-with-icon{
		background-size: 30px 30px;
		background-position: 5px;
	}
	.move-input-with-icon{
		background-size: 20px 20px;
		background-position: 10px;
	}
	
	button {
		width: 100%;
	}
	.ui-controlgroup-item {
		margin-top: 5px;
		margin-bottom: 5px;
	}
	.ui-button{
		background-color: #3076b2;
	}
	.ui-button:hover {
		background-color: #366ea2;
	}
	

	.player_button {
		vertical-align: middle;
		height: 31.6px;
		color: #3076b2 !important;
		background-color: white;
		border: 1px solid #3076b2;
		padding: 0px 0px;
	}
	.player_button:hover{
		color: #fff !important;
		background-color: #366ea2;
	}
	
	.section-node-head{
		height: 30px;
		padding-bottom: 3px;
	}
	.section-pokemon-node-title{
		font-size: 18;
		display: inline-block;
	}
	.section-party-node-title{
		font-size: 20;
		display: inline-block;
	}
	.section-player-node-title{
		font-size: 22;
		display: inline-block;
	}
	
	.section-buttons-panel{
		float: right;
	}
	.button-icon{
		background-color: transparent;
		margin: 4px;
		cursor:pointer;
		height: 30px;
		width: 30px;
	}	
	
	.ui-checkboxradio-label{
		color: white;
	}
	div#ui-mastersummarytable_filter {
	    float: none;
	}
	.dataTables_wrapper .dataTables_filter input {
	    margin: 5px 0px 0px 0px;
	}

	div#ui-mastersummarytable_filter {
	    float: none;
	    padding: 5px 5px 0px 5px;
	}
	table.dataTable thead .sorting {
	    background-image: none !important;
	}
	.dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
	    color: #585858;
	}
	.fg-toolbar.ui-toolbar.ui-widget-header.ui-helper-clearfix.ui-corner-bl.ui-corner-br {
	    padding: 0px 0px 10px 8px;
	}
	div#feedback_buttons {
		margin-bottom: 15px;
	}
	div#feedback_message {
	    margin-bottom: 10px;
	}
	div#ui-mastersummarytable_filter label {
		text-align: left;
	}
	
	img{
		max-width: 100%;
		max-height: 100%;
		vertical-align: middle !important;
	}
	.apitem-pokemon-icon {
		display:inline-block;
		align: center;
		vertical-align: middle;
		height: 30px;	
	}
	.apitem-move-icon {
		display:inline-block;
		align: center;
		vertical-align: middle !important;
		height: 20px;
	}
	.apitem-label{
		padding-left: 5px;
		vertical-align: middle !important;
		display:inline-block;
	}
	
	.section-body, div#ui-defenderinputbody > div{
		background: #f1f1f1;
		padding: 5px 8px;
		border-radius: 3px;
		margin: 10px 0px;
		border: 1px solid #ddd;
	}
	.section-player-node{
		background: #BED2E1;
	}
	.section-party-node{
		background: #A7C9E3;
	}
	.section-pokemon-node{
		background: #7EB9E6;
	}
	
	.ui-autocomplete {
		max-height: 300px;
		overflow-y: auto;
		overflow-x: hidden;
		padding-right: 20px;
	} 

}
</style>

<div id='menu'>
	<table><colgroup><col width=33%><col width=33%><col width=34%></colgroup>
		<tr>
			<td><button id='moveEditFormOpener'>Add/Edit Move</button></td>
			<td><button id='pokemonEditFormOpener'>Add/Edit Pokemon Species</button></td>
			<td><button id='userEditFormOpener'>Add/Remove User</button></td>
		</tr>
	</table>
</div>

<div id="AttackerInput">
	<div id="ui-attackerinputhead">
		<h2>Attacker Information</h2>
		<button id='ui-addplayerbutton' class='player_button' onclick="javascript:addPlayerNode()">Add Player</button>
	</div>
	
	<div id="ui-attackerinputbody">
	</div>
	
	<div id="ui-attackerinputtail">
	</div>
</div>



<div id="DefenderInput">
	<div id="ui-defenderinputhead">
		<h2>Defender Information</h2>
	</div>
	
	<div id="ui-defenderinputbody">
	</div>
	
	<div id="ui-defenderinputtail">
	</div>
</div>


<h2>General Settings</h2>
<div id="GeneralSettings">
	<table>
	<col width=20%><col width=20%><col width=20%><col width=20%><col width=20%>
	<tr>
		<th>Mode</th>
		<td><select id="battleMode"  onchange="updateDefenderNode()">
				<option value="gym">Gym</option>
				<option value="raid" selected="selected">Raid</option>
			</select>
		</td>
	</tr>
	<tr>
		<th>Immortal Defender</th>
		<td><select id="immortalDefender">
				<option value="0">No</option>
				<option value="1">Yes</option>
			</select>
		</td>
	</tr>
	<tr>
		<th>Weather</th>
		<td>
			<select id="weather">
				<option value="EXTREME">Extreme</option>
				<option value="SUNNY_CLEAR">Sunny/Clear</option>
				<option value="RAIN">Rain</option>
				<option value="PARTLY_CLOUDY">Party Cloudy</option>
				<option value="CLOUDY">Cloudy</option>
				<option value="WINDY">Windy</option>
				<option value="SNOW">Snow</option>
				<option value="FOG">Fog</option>
				<option value="*">*</option>
			</select>
		</td>
	</tr>
	<tr>
		<th>Dodge Bug</th>
		<td>
			<select id="dodgeBug">
				<option value="0">Absent</option>
				<option value="1">Present</option>
			</select>
		</td>
	</tr>
	<tr>
		<th>Repeat</th>
		<td>
			<input id="simPerConfig" type="number" min="1">
		</td>
	</tr>
	<tr>
		<th>Report Type</th>
		<td>
			<select id="reportType">
				<option value="enum">Enumerate</option>
				<option value="avrg">Average</option>
			</select>
		</td>
	</tr>
	</table>
<p></p>
</div>

<button onclick="main()" id="GoButton">Go</button>


<h2>Feedback</h2>
<div id="feedback_message">
<p><em>Thanks for using <a href="https://github.com/ymenghank/GoBattleSim">GoBattleSim</a>, a simulator developed by <a href="https://www.reddit.com/user/biowpn">u/biowpn</a> and inspired by <a href="https://www.reddit.com/user/doublefelix921">u/doublefelix921</a>'s <a href="https://github.com/doublefelix921/battlesim">BattleSim</a>.</p>
</div>

<div id="feedback_buttons"></div>
<div id="feedback_table1"></div>
<div id="feedback_table2"></div>



<div id='moveEditForm' title="Add/Edit Move">
	<table>
		<tr>
			<th>Move Category</th> 
			<td><select id='moveEditForm-moveType' onchange='autocompleteMoveEditForm()'>
				<option value='f'>Fast</option>
				<option value='c'>Charged</option>
			</select></td>
		</tr>
		<tr>
			<th>Move Name</th> 
			<td><input type='text' id='moveEditForm-name' class='input-with-icon move-input-with-icon'></td>
		</tr>
		<tr>
			<th>Move Typing</th> 
			<td><select id='moveEditForm-pokeType'></select></td>
		</tr>
		<tr>
			<th>Power</th> 
			<td><input type='number' id='moveEditForm-power'></td>
		</tr>
		<tr>
			<th>EnergyDelta</th> 
			<td><input type='number' id='moveEditForm-energyDelta'></td>
		</tr>
		<tr>
			<th>Duration (in seconds)</th> 
			<td><input type='number' id='moveEditForm-duration'></td>
		</tr>
		<tr>
			<th>Damage Window (in seconds)</th> 
			<td><input type='number' id='moveEditForm-dws'></td>
		</tr>
	</table>
	<button onclick='moveEditFormSubmit()' id='moveEditForm-submit'>Save</button></td>
	<div id='moveEditForm-feedback'>
	</div>
</div>


<div id='pokemonEditForm' title="Add/Edit Pokemon">
	<table>
		<tr>
			<th>Pokemon Name</th> 
			<td><input type='text' id='pokemonEditForm-name' class='input-with-icon species-input-with-icon'></td>
		</tr>
		<tr>
			<th>Pokemon Typing 1</th> 
			<td><select id='pokemonEditForm-pokeType1'></select></td>
		</tr>
		<tr>
			<th>Pokemon Typing 2</th> 
			<td><select id='pokemonEditForm-pokeType2'></select></td>
		</tr>
		<tr>
			<th>Base Attack</th> 
			<td><input type='number' id='pokemonEditForm-baseAtk'></td>
		</tr>
		<tr>
			<th>Base Defense</th> 
			<td><input type='number' id='pokemonEditForm-baseDef'></td>
		</tr>
		<tr>
			<th>Base Stamina</th> 
			<td><input type='number' id='pokemonEditForm-baseStm'></td>
		</tr>
		<tr>
			<th>Fast Move Pool</th> 
			<td><input type='text' id='pokemonEditForm-fmoves'></td>
		</tr>
		<tr>
			<th>Charged Move Pool</th> 
			<td><input type='text' id='pokemonEditForm-cmoves'></td>
		</tr>

	</table>
	<button onclick='pokemonEditFormSubmit()' id='pokemonEditForm-submit'>Save</button></td>
	<div id='pokemonEditForm-feedback'>
	</div>
</div>


<div id='userEditForm' title="Add/Edit User">
	<h4>List of Users</h4>
	<table id='userEditForm-userTable'>
		<thead>
			<tr><th>Player No.</th><th>UserID</th><th>PokeBox Length</th></tr>
		</thead>
		<tbody>
		
		</tbody>
	</table>
	
	<br>
	<input type='text' id='userEditForm-userID-1' placeholder='userID To Add/Remove'></input>
	<table><colgroup><col width=50%><col width=50%></colgroup>
		<tr>
			<td><button onclick='userEditFormAddUser()'>Add User</button></td>
			<td><button onclick='userEditFormRemoveUser()'>Remove User</button></td>
		</tr>
	</table>
	
	<div id='userEditForm-feedback'>
	</div>
</div>



<script>

$( "#moveEditForm" ).dialog({ 
	autoOpen: false,
	width: 600
});
$( "#moveEditFormOpener" ).click(function() {
  $( "#moveEditForm" ).dialog( "open" );
});

$( "#pokemonEditForm" ).dialog({ 
	autoOpen: false,
	width: 600
});
$( "#pokemonEditFormOpener" ).click(function() {
  $( "#pokemonEditForm" ).dialog( "open" );
});

var moveEditFormPokeTypeSelect = document.getElementById('moveEditForm-pokeType');
var pokemonEditFormPokeType1Select = document.getElementById('pokemonEditForm-pokeType1');
var pokemonEditFormPokeType2Select = document.getElementById('pokemonEditForm-pokeType2');
for (var type in POKEMON_TYPE_ADVANTAGES){
	moveEditFormPokeTypeSelect.appendChild(createElement('option', toTitleCase(type), {value : type}));
	pokemonEditFormPokeType1Select.appendChild(createElement('option', toTitleCase(type), {value : type}));
	pokemonEditFormPokeType2Select.appendChild(createElement('option', toTitleCase(type), {value : type}));
}
pokemonEditFormPokeType2Select.appendChild(createElement('option', 'None', {value : 'none'}));


$( "#userEditForm" ).dialog({ 
	autoOpen: false,
	width: 600
});
$( "#userEditFormOpener" ).click(function() {
  $( "#userEditForm" ).dialog( "open" );
});

</script>